<Window x:Class="AergiaConfigurator.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:AergiaConfigurator"
        mc:Ignorable="d"
        Title="Aergia Device Configurator" Height="400" Width="800" Background="#242424" Foreground="#A8B5C3" FontSize="14" >
        <Window.Resources>
                <!-- Prefix 用 Run のスタイル -->
                <Style x:Key="PrefixRunStyle" TargetType="Run">
                        <Style.Triggers>
                                <DataTrigger Binding="{Binding Level}" Value="Error">
                                        <Setter Property="Foreground" Value="Crimson"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Level}" Value="Warning">
                                        <Setter Property="Foreground" Value="Orange"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Level}" Value="Info">
                                        <Setter Property="Foreground" Value="#6C95EB"/>
                                </DataTrigger>
                        </Style.Triggers>
                </Style>
        </Window.Resources>
        <Grid ShowGridLines="False" Margin="20,10,20,10">
                <Grid.RowDefinitions>
                        <RowDefinition Height="40" />
                        <RowDefinition Height="40"/>
                        <RowDefinition Height="50"/>
                        <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="180" />
                        <ColumnDefinition Width="20" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="50" />
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Row="0" Grid.Column="0" FontWeight="Bold" Height="24">Target Device</TextBlock>
                <ComboBox Grid.Row="0" Grid.Column="2" Grid.ColumnSpan="2" Name="CBDeviceList" Height="30" SelectedValuePath="Port" DisplayMemberPath="Description" SelectionChanged="OnDeviceChanged" SourceUpdated="OnDeviceDetected"></ComboBox>
                <TextBlock Grid.Row="1" Grid.Column="0" FontWeight="Bold" Height="24">Configure File</TextBlock>
                <TextBox  Grid.Row="1" Grid.Column="2" Name="TBFileName" Height="30" VerticalContentAlignment="Center"></TextBox>
                <Button  Grid.Row="1" Grid.Column="3" Height="30" Margin="4" Click="OnFileSelectClick">...</Button>
                <Button  Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="4" Width="150" Height="30" Margin="4" Click="OnUpdateClick">UPDATE</Button>
                <!--
                <RichTextBox Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="4" Name="TBLog" Width="auto" Height="auto"  Margin="4" ></RichTextBox>
                -->
                <ListBox Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="4" Name="TBLog" Width="auto" Height="auto"  Margin="4"  Background="#242424" 
                         ItemsSource="{Binding Logs}"
                         BorderThickness="0"
                         BorderBrush="Transparent"
                         VirtualizingStackPanel.IsVirtualizing="True"
                         VirtualizingStackPanel.VirtualizationMode="Recycling">
                        <ListBox.ItemTemplate>
                                <DataTemplate>
                                        <TextBlock TextWrapping="Wrap">
                                                <TextBlock.Inlines>
                                                        <Run Text="{Binding Prefix}" Style="{StaticResource PrefixRunStyle}"/>
                                                        <Run Text="{Binding Message}" Foreground="#A8B5C3"/>
                                                </TextBlock.Inlines>
                                        </TextBlock>
                                </DataTemplate>
                        </ListBox.ItemTemplate>
                </ListBox>
        </Grid>
</Window>
